{"ast":null,"code":"import { create } from 'zustand';\nimport { Cookies } from \"react-cookie\";\nimport { persist } from \"zustand/middleware\";\nimport jwt_decode from \"jwt-decode\";\nconst cookies = new Cookies();\nconst token = cookies.get(\"token\");\nconst decoded = token ? jwt_decode(token).sub : null;\nconsole.log(decoded);\nconst userStore = create()(persist((set, get) => ({\n  username: decoded,\n  setUsername: username => {\n    set(state => ({\n      ...state,\n      username\n    }));\n  },\n  logout: () => {\n    set(state => ({\n      ...state,\n      username: null\n    }));\n  }\n}), {\n  name: \"userStore\"\n}));\nexport default userStore;","map":{"version":3,"names":["create","Cookies","persist","jwt_decode","cookies","token","get","decoded","sub","console","log","userStore","set","username","setUsername","state","logout","name"],"sources":["/Users/u-keunsong/IdeaProjects/DANGDO/dangdo-react/src/stores/user.store.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { Cookies } from \"react-cookie\";\r\nimport { persist } from \"zustand/middleware\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\ninterface DecodedToken {\r\n  sub: string;\r\n}\r\n\r\nconst cookies = new Cookies();\r\nconst token = cookies.get(\"token\");\r\nconst decoded: string | null = token ? jwt_decode<DecodedToken>(token).sub : null;\r\n\r\n\r\nconsole.log(decoded)\r\n\r\n\r\ninterface UserStore {\r\n  username: string | null;\r\n  setUsername: (username: string) => void;\r\n  logout: () => void;\r\n}\r\n\r\nconst userStore = create<UserStore>()(\r\n  persist(\r\n    (set, get) => ({\r\n      username: decoded,\r\n\r\n      setUsername: (username: string | null) => {\r\n        set((state) => ({ ...state, username }));\r\n      },\r\n      logout: () => {\r\n        set((state) => ({ ...state, username: null }));\r\n       },\r\n    }),\r\n    { name: \"userStore\" }\r\n  )\r\n);\r\n\r\nexport default userStore;"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAChC,SAASC,OAAO,QAAQ,cAAc;AACtC,SAASC,OAAO,QAAQ,oBAAoB;AAC5C,OAAOC,UAAU,MAAM,YAAY;AAMnC,MAAMC,OAAO,GAAG,IAAIH,OAAO,EAAE;AAC7B,MAAMI,KAAK,GAAGD,OAAO,CAACE,GAAG,CAAC,OAAO,CAAC;AAClC,MAAMC,OAAsB,GAAGF,KAAK,GAAGF,UAAU,CAAeE,KAAK,CAAC,CAACG,GAAG,GAAG,IAAI;AAGjFC,OAAO,CAACC,GAAG,CAACH,OAAO,CAAC;AASpB,MAAMI,SAAS,GAAGX,MAAM,EAAa,CACnCE,OAAO,CACL,CAACU,GAAG,EAAEN,GAAG,MAAM;EACbO,QAAQ,EAAEN,OAAO;EAEjBO,WAAW,EAAGD,QAAuB,IAAK;IACxCD,GAAG,CAAEG,KAAK,KAAM;MAAE,GAAGA,KAAK;MAAEF;IAAS,CAAC,CAAC,CAAC;EAC1C,CAAC;EACDG,MAAM,EAAEA,CAAA,KAAM;IACZJ,GAAG,CAAEG,KAAK,KAAM;MAAE,GAAGA,KAAK;MAAEF,QAAQ,EAAE;IAAK,CAAC,CAAC,CAAC;EAC/C;AACH,CAAC,CAAC,EACF;EAAEI,IAAI,EAAE;AAAY,CAAC,CACtB,CACF;AAED,eAAeN,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}